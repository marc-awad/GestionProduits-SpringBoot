<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title th:text="${produit.id != null ? 'Modifier le produit' : 'Ajouter un produit'}">Formulaire Produit</title>

  <!-- Font Awesome CDN -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

  <!-- CSS personnalisé -->
  <link rel="stylesheet" th:href="@{/css/styles.css}">
</head>
<body>

<header>
  <div class="container">
    <h1><i class="fas fa-leaf"></i> Gestion des Thés</h1>
    <p>Système de gestion d'inventaire</p>
  </div>
</header>

<div class="container">

  <!-- Titre dynamique -->
  <div class="top-bar">
    <h2>
      <i th:class="${produit.id != null ? 'fas fa-edit' : 'fas fa-plus-circle'}"></i>
      <span th:text="${produit.id != null ? 'Modifier le produit' : 'Ajouter un nouveau produit'}">Formulaire</span>
    </h2>
  </div>

  <!-- Formulaire -->
  <div class="table-container">
    <form th:action="@{/produits/sauvegarder}"
          th:object="${produit}"
          method="post"
          class="product-form">

      <!-- Champ caché pour l'ID (nécessaire pour la modification) -->
      <input type="hidden" th:field="*{id}">

      <div class="form-row">
        <!-- Nom du produit -->
        <div class="form-group">
          <label for="nom">
            <i class="fas fa-mug-hot"></i>
            Nom du produit <span class="required">*</span>
          </label>
          <input type="text"
                 class="form-control"
                 id="nom"
                 th:field="*{nom}"
                 th:classappend="${#fields.hasErrors('nom')} ? 'error' : ''"
                 placeholder="Ex: Thé vert Sencha">
          <span class="error-message" th:if="${#fields.hasErrors('nom')}" th:errors="*{nom}"></span>
        </div>

        <!-- Type de thé -->
        <div class="form-group">
          <label for="typeThe">
            <i class="fas fa-leaf"></i>
            Type de thé <span class="required">*</span>
          </label>
          <select class="form-control"
                  id="typeThe"
                  th:field="*{typeThe}"
                  th:classappend="${#fields.hasErrors('typeThe')} ? 'error' : ''">
            <option value="">-- Sélectionnez un type --</option>
            <option value="Vert">Vert</option>
            <option value="Noir">Noir</option>
            <option value="Blanc">Blanc</option>
            <option value="Oolong">Oolong</option>
            <option value="Rouge">Rouge</option>
          </select>
          <span class="error-message" th:if="${#fields.hasErrors('typeThe')}" th:errors="*{typeThe}"></span>
        </div>
      </div>

      <div class="form-row">
        <!-- Origine -->
        <div class="form-group">
          <label for="origine">
            <i class="fas fa-globe"></i>
            Origine <span class="required">*</span>
          </label>
          <select class="form-control"
                  id="origine"
                  th:field="*{origine}"
                  th:classappend="${#fields.hasErrors('origine')} ? 'error' : ''">
            <option value="">-- Sélectionnez une origine --</option>
            <option value="Chine">Chine</option>
            <option value="Japon">Japon</option>
            <option value="Inde">Inde</option>
            <option value="Sri Lanka">Sri Lanka</option>
            <option value="Kenya">Kenya</option>
            <option value="Taiwan">Taïwan</option>
            <option value="Nepal">Népal</option>
            <option value="Vietnam">Vietnam</option>
          </select>
          <span class="error-message" th:if="${#fields.hasErrors('origine')}" th:errors="*{origine}"></span>
        </div>

        <!-- Prix -->
        <div class="form-group">
          <label for="prix">
            <i class="fas fa-euro-sign"></i>
            Prix (€) <span class="required">*</span>
          </label>
          <input type="number"
                 class="form-control"
                 id="prix"
                 th:field="*{prix}"
                 th:classappend="${#fields.hasErrors('prix')} ? 'error' : ''"
                 step="0.01"
                 min="5"
                 max="100"
                 placeholder="Ex: 15.99">
          <span class="error-message" th:if="${#fields.hasErrors('prix')}" th:errors="*{prix}"></span>
        </div>
      </div>

      <div class="form-row">
        <!-- Quantité en stock -->
        <div class="form-group">
          <label for="quantiteStock">
            <i class="fas fa-boxes"></i>
            Quantité en stock <span class="required">*</span>
          </label>
          <input type="number"
                 class="form-control"
                 id="quantiteStock"
                 th:field="*{quantiteStock}"
                 th:classappend="${#fields.hasErrors('quantiteStock')} ? 'error' : ''"
                 min="0"
                 placeholder="Ex: 100">
          <span class="error-message" th:if="${#fields.hasErrors('quantiteStock')}" th:errors="*{quantiteStock}"></span>
        </div>

        <!-- Date de réception -->
        <div class="form-group">
          <label for="dateReception">
            <i class="fas fa-calendar"></i>
            Date de réception <span class="required">*</span>
          </label>
          <input type="date"
                 class="form-control"
                 id="dateReception"
                 name="dateReception"
                 th:value="${produit.dateReception != null ? #temporals.format(produit.dateReception, 'yyyy-MM-dd') : ''}"
                 th:classappend="${#fields.hasErrors('dateReception')} ? 'error' : ''">
          <span class="error-message" th:if="${#fields.hasErrors('dateReception')}" th:errors="*{dateReception}"></span>
        </div>
      </div>

      <!-- Description -->
      <div class="form-group">
        <label for="description">
          <i class="fas fa-align-left"></i>
          Description
        </label>
        <textarea class="form-control"
                  id="description"
                  th:field="*{description}"
                  th:classappend="${#fields.hasErrors('description')} ? 'error' : ''"
                  rows="4"
                  maxlength="500"
                  placeholder="Décrivez les caractéristiques du thé..."></textarea>
        <span class="error-message" th:if="${#fields.hasErrors('description')}" th:errors="*{description}"></span>
        <small class="form-text">
          <i class="fas fa-info-circle"></i>
          Maximum 500 caractères
        </small>
      </div>

      <!-- Boutons d'action -->
      <div class="form-actions">
        <button type="submit" class="btn btn-success">
          <i class="fas fa-save"></i>
          <span th:text="${produit.id != null ? 'Enregistrer les modifications' : 'Enregistrer'}"></span>
        </button>
        <a th:href="@{/produits}" class="btn btn-secondary">
          <i class="fas fa-times"></i>
          Annuler
        </a>
      </div>

    </form>
  </div>

  <!-- Note informative -->
  <div class="info-text" style="margin-top: 20px;">
        <span>
            <i class="fas fa-asterisk" style="color: #d32f2f; font-size: 0.7rem;"></i>
            Champs obligatoires
        </span>
  </div>

</div>

<footer>
  <p>
    <i class="fas fa-copyright"></i>
    2026 Gestion des Thés - Tous droits réservés
  </p>
</footer>

<script th:src="@{/js/scripts.js}"></script>

</body>
</html>